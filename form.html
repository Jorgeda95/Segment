<!DOCTYPE html>
<html>

<head>
    <title>Ejemplo Web Segment<span id="selection-marker-1" class="redactor-selection-marker"></span></title>
    <script>
        ! function() {
            var analytics = window.analytics = window.analytics || [];
            if (!analytics.initialize)
                if (analytics.invoked) window.console && console.error && console.error("Segment snippet included twice.");
                else {
                    analytics.invoked = !0;
                    analytics.methods = ["trackSubmit", "trackClick", "trackLink", "trackForm", "pageview", "identify", "reset", "group", "track", "ready", "alias", "debug", "page", "once", "off", "on"];
                    analytics.factory = function(t) {
                        return function() {
                            var e = Array.prototype.slice.call(arguments);
                            e.unshift(t);
                            analytics.push(e);
                            return analytics
                        }
                    };
                    for (var t = 0; t < analytics.methods.length; t++) {
                        var e = analytics.methods[t];
                        analytics[e] = analytics.factory(e)
                    }
                    analytics.load = function(t, e) {
                        var n = document.createElement("script");
                        n.type = "text/javascript";
                        n.async = !0;
                        n.src = ("https:" === document.location.protocol ? "https://" : "http://") + "cdn.segment.com/analytics.js/v1/" + t + "/analytics.min.js";
                        var o = document.getElementsByTagName("script")[0];
                        o.parentNode.insertBefore(n, o);
                        analytics._loadOptions = e
                    };
                    analytics.SNIPPET_VERSION = "4.1.0";
                    analytics.load("SG46KxtqR1eNZDnVHACJFwk3atu9Fl0x");
                    analytics.page();
                }
        }();
    </script>
</head>

<body>
    <h1>Ejemplo Segment5</h1>
    <h2>Demostración de fuentes: envío de formulario</h2>
    <h3>Luego de dar click al submit revisar la plataforma de Segment</h3>
    
    <form name="form" onsubmit="identify(event)">
        <br><br><br> 
        <!--Datos personales -->
        <br><br> Nombre: <input name="fullname" size="75" type="text" />
        <br><br> Edad: <input name="age" size="75" type="text" />
        <br><br> Teléfono: <input name="phone" size="75" type="text" />
        <br><br> Email: <input name="email" size="75" type="email" />
        <br><br> Género: <input name="gender" size="75" type="text" />
        <br><br> DPI: <input name="dpi" size="75" type="text" />
        <!--Otros datos -->
        <br><br> Puesto: <input name="title" size="75" type="text" />
        <br><br> Id Empresa: <input name="comp_id" size="75" type="number" />
        <br><br> Nombre Empresa: <input name="comp_name" size="75" type="text" />
        <br><br> Estado Empresa: <input name="state" size="75" type="text" />
        <br><br> Rating: <input name="rating" size="75" type="text" />
        <br><br> Ciudad: <input name="home_city" size="75" type="text" />
        <br><br> Estado: <input name="home_state" size="75" type="text" />
        <br><br> País: <input name="home_country" size="75" type="text" />
        <br><br> Zip: <input name="home_zip" size="75" type="text" />
        <br><br> Dirección: <input name="home_street" size="75" type="text" />
        <br><br>¿Alguna otra información relevante sobre su empresa?
        <br><br>
        <textarea cols="81" name="details" rows="10">
    </textarea>
        <br><br<br><input name="submit" type="submit" value="submit" />
    </form>
    <script type="text/javascript">
        function identify(e) {
            e.preventDefault();
            var form = e.target;
            var email = form["email"].value;
            var title = form["title"].value;
            var age = form["age"].value;
            var gender = form["gender"].value;
            var comp_id = form["comp_id"].value;
            var comp_name = form["comp_name"].value;
            var fullname = form["fullname"].value;
            var phone = form["phone"].value;
            var state = form["state"].value;
            var rating = form["rating"].value
            var details = form["details"].value;
            var home_city = form["home_city"].value;
            var home_zip = form["home_zip"].value;
            var home_country = form["home_country"].value;
            var home_street = form["home_street"].value;
            var home_state = form["home_state"].value;
            var dpi = form["dpi"].value;
            var rn = Math.floor((Math.random() * 1000000) + 1);
            
            analytics.identify(12345, {
                name: fullname,
                email: email,
                title: title,
                age: age,
                gender: gender,
                phone: phone,
                state: state,
                rating: rating,
                dpi: dpi,
                address: {
                    city: home_city,
                    postalCode: home_zip,
                    country: home_country,
                    street: home_street,
                    state: home_state
                },

                 company: {
                    id: comp_id,
                    name: comp_name
                },
                
                is_first_session: 'true',
                clicked_random_link: 'true',
                viewed_product: 'true',
               
                 /* Atributos no Visibles*/
                leadSource: 'FormularioWeb',
                category: 'PepsiMusic',
                EventoPaís: 'formulariogt',
                EventoCategoria: 'formularioPepsiMusicgt',
                EventoPromocion: 'formularioFlaminHotxGiraRefrescantegt'
            }, {
                'integrations': {
                    'Salesforce': true
                }
            });

            analytics.track('Form Submitted', {
                type: "Lead Generation",
            });

        }
    </script>
</body>

</html>
